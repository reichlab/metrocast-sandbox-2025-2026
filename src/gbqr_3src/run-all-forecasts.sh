#!/bin/bash
# Sequential script for running all forecasts locally

# Array of dates to process
dates=(
  "2023-10-18"
  "2023-10-25"
  "2023-11-01"
  "2023-11-08"
  "2023-11-15"
  "2023-11-22"
  "2023-11-29"
  "2023-12-06"
  "2023-12-13"
  "2023-12-20"
  "2023-12-27"
  "2024-01-03"
  "2024-01-10"
  "2024-01-17"
  "2024-01-24"
  "2024-01-31"
  "2024-02-07"
  "2024-02-14"
  "2024-02-21"
  "2024-02-28"
  "2024-03-06"
  "2024-03-13"
  "2024-03-20"
  "2024-03-27"
  "2024-04-03"
  "2024-04-10"
  "2024-04-17"
  "2024-04-24"
  "2024-05-01"
  "2024-05-08"
  "2024-11-27"
  "2024-12-04"
  "2024-12-11"
  "2024-12-18"
  "2024-12-25"
  "2025-01-01"
  "2025-01-08"
  "2025-01-15"
  "2025-01-22"
  "2025-01-29"
  "2025-02-05"
  "2025-02-12"
  "2025-02-19"
  "2025-02-26"
  "2025-03-05"
  "2025-03-12"
  "2025-03-19"
  "2025-03-26"
  "2025-04-02"
  "2025-04-09"
  "2025-04-16"
  "2025-04-23"
  "2025-04-30"
  "2025-05-07"
  "2025-05-14"
)

echo "Running ${#dates[@]} forecasts sequentially..."
echo "=========================================="

for date in "${dates[@]}"; do
    echo "Processing date: $date"
    python main.py --today_date="$date"

    if [ $? -ne 0 ]; then
        echo "Error: Forecast failed for $date"
        exit 1
    fi

    echo "Completed: $date"
    echo "------------------------------------------"
done

echo "=========================================="
echo "All forecasts completed successfully!"
